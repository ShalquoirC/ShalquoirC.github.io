<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-Unity教程笔记——Ruby‘s Adventure" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/19/Unity%E6%95%99%E7%A8%8B%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Ruby%E2%80%98s%20Adventure/" class="article-date">
  <time class="dt-published" datetime="2021-01-19T08:11:20.000Z" itemprop="datePublished">2021-01-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/19/Unity%E6%95%99%E7%A8%8B%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Ruby%E2%80%98s%20Adventure/">Unity教程笔记——Ruby‘s Adventure</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Unity教程笔记——Ruby‘s-Adventure"><a href="#Unity教程笔记——Ruby‘s-Adventure" class="headerlink" title="Unity教程笔记——Ruby‘s Adventure"></a>Unity教程笔记——Ruby‘s Adventure</h1><p>有一段时间没有使用unity了之前学习Michael教程的Sunny中的一些技巧差不多忘了，故重头开始学习一个2D项目，并记录笔记加强印象。</p>
<h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><h3 id="角色移动"><a href="#角色移动" class="headerlink" title="角色移动"></a>角色移动</h3><p>首先定义一个公共变量 speed 并对其赋值</p>
<p>控制角色移动逻辑很简单，围绕 </p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform.Translate(transform.right * speed * Time.deltaTime);</span><br></pre></td></tr></table></figure>
<p>最后的实现</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">float</span> moveX = Input.GetAxisRaw(<span class="string">&quot;Horizontal&quot;</span>);</span><br><span class="line">      <span class="built_in">float</span> moveY = Input.GetAxisRaw(<span class="string">&quot;Vertical&quot;</span>);</span><br><span class="line">      Vector2 position = transform.position;</span><br><span class="line">      position.x += moveX * speed * Time.deltaTime;</span><br><span class="line">      position.y += moveY * speed * Time.deltaTime;</span><br><span class="line">      transform.position = position;</span><br></pre></td></tr></table></figure>
<h4 id="锁定方向"><a href="#锁定方向" class="headerlink" title="锁定方向"></a>锁定方向</h4><p>在同其他刚体碰撞的时候，精灵图片可能会旋转，在2D游戏中这很不合理。所以需要解决。在运动精灵的Rigidbody2D 的Constraints中锁定Z。</p>
<h4 id="解决抖动问题"><a href="#解决抖动问题" class="headerlink" title="解决抖动问题"></a>解决抖动问题</h4><p>获取Rigidbody2D</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Rigidbody2D rbody;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    rbody = GetComponent&lt;Rigidbody2D&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>移动脚本中修改为移动精灵的Rigidbody组件位置</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">float</span> moveX = Input.GetAxisRaw(<span class="string">&quot;Horizontal&quot;</span>);</span><br><span class="line"><span class="built_in">float</span> moveY = Input.GetAxisRaw(<span class="string">&quot;Vertical&quot;</span>);</span><br><span class="line">Vector2 position = rbody.position;</span><br><span class="line">position.x += moveX * speed * Time.deltaTime;</span><br><span class="line">position.y += moveY * speed * Time.deltaTime;</span><br><span class="line">rbody.MovePosition( position);</span><br></pre></td></tr></table></figure>
<h4 id="瓦片碰撞体"><a href="#瓦片碰撞体" class="headerlink" title="瓦片碰撞体"></a>瓦片碰撞体</h4><p>给TIlemap 添加tillemap Collider 2D，对应图片素材可进行设置</p>
<img src="1.png" alt="1" style="zoom:33%;" />

<p>添加Composite Collider2D 并设置Rigidbody为静态。</p>
<h3 id="2D图片精灵操作"><a href="#2D图片精灵操作" class="headerlink" title="2D图片精灵操作"></a>2D图片精灵操作</h3><p>​    一般情况下，我们的素材大小并不统一，在将素材图片设置为<strong>素材</strong>后，根据素材属性（192×192）在Inspector中设置 Pixels Per Unit成适当的大小（64，切成3×3的瓦片），以保证单位方格的正确填充。</p>
<h3 id="图层排序"><a href="#图层排序" class="headerlink" title="图层排序"></a>图层排序</h3><p>在添加精灵时，通过设置精灵的<em>Order in Layer</em>可以对精灵的图层顺序进行简单的排序，但在处理一些其他情况的时候就不大合理了，案例中狐狸在树前树后的排序就会出现问题。</p>
<p><img src="2.png" alt="2"></p>
<p>为了保证角色同其他物件的正确排序，需要在项目设置中(Edit-Project Setting-Graphics)中设置 透明度分类设置(Transparency Sort mode) 为自定义(Custom Axis) ，并设置Transparency Sort Axis为如下</p>
<p><img src="3-1611058713490.png" alt="3"></p>
<p>Transparency Sort Axis控制同一层级的显示顺序，默认 XY0，Z1，改为Y1Z0，用来符合2D规则。</p>
<p>(一半一半规律，a精灵在b精灵之下50%，则a覆盖b，反之b覆盖a)</p>
<h3 id="摄像机"><a href="#摄像机" class="headerlink" title="摄像机"></a>摄像机</h3><p>安装unity自带的包Cinema Machine，安装完成后上方栏位多出Cinemachine，其中可添加2d camera。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/01/19/Unity%E6%95%99%E7%A8%8B%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Ruby%E2%80%98s%20Adventure/" data-id="ckk7nbzos0004xww5c1a0egt9" data-title="Unity教程笔记——Ruby‘s Adventure" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Coroutine协同程序" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/17/Coroutine%E5%8D%8F%E5%90%8C%E7%A8%8B%E5%BA%8F/" class="article-date">
  <time class="dt-published" datetime="2021-01-17T08:11:20.000Z" itemprop="datePublished">2021-01-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/17/Coroutine%E5%8D%8F%E5%90%8C%E7%A8%8B%E5%BA%8F/">Coroutine</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="Coroutine协同程序-较难"><a href="#Coroutine协同程序-较难" class="headerlink" title="Coroutine协同程序(较难)"></a>Coroutine协同程序(较难)</h4><p>MonoBehaviour.StartCoroutine(string methodName)方法打开另一个协同程序（线程）</p>
<p>IEnumerator </p>
<p>yield: 声明序列中的下一个值或者是一个无意义的值。 </p>
<ul>
<li>如果使用yield x（x是指一个具体的对象或数值）的话，那么movenext返回为true并且current被赋值为x</li>
<li>如果使用yield break使得movenext()返回false。 </li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">IEnumerator <span class="title">LongComputation</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(someCondition)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/* 做一系列的工作 */</span></span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 在这里暂停然后在下一帧继续执行</span></span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>StopCoroutine(string methodName)</p>
<p>StopAllCoroutines()</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/01/17/Coroutine%E5%8D%8F%E5%90%8C%E7%A8%8B%E5%BA%8F/" data-id="ckk7nbzoh0000xww561y7cy9j" data-title="Coroutine" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Unity3D 光照" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/17/Unity3D%20%E5%85%89%E7%85%A7/" class="article-date">
  <time class="dt-published" datetime="2021-01-17T08:11:20.000Z" itemprop="datePublished">2021-01-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/17/Unity3D%20%E5%85%89%E7%85%A7/">Unity3D光照</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Unity3D-光照"><a href="#Unity3D-光照" class="headerlink" title="Unity3D 光照"></a>Unity3D 光照</h1><p>Directlight</p>
<p>transform</p>
<h3 id="light"><a href="#light" class="headerlink" title="light"></a>light</h3><p>baking(烘培)</p>
<p>color（颜色）</p>
<p>Intensity(强度)</p>
<p>Bounce Intensity(反射强度)</p>
<p>Shadows（阴影)</p>
<p>Cookies(遮挡)</p>
<p>Render Mode(渲染模式)</p>
<p>Cilling Mask（剔除遮挡)</p>
<ul>
<li>可以选择性（层）照亮</li>
<li>可以用于照亮角色（显示轮廓）</li>
<li>天花板、墙面均匀光照</li>
</ul>
<h4 id="Area-Light"><a href="#Area-Light" class="headerlink" title="Area Light"></a>Area Light</h4><p>仅作用于baking</p>
<h5 id="Mesh-Renderer"><a href="#Mesh-Renderer" class="headerlink" title="Mesh Renderer"></a>Mesh Renderer</h5><h6 id="属性"><a href="#属性" class="headerlink" title="属性"></a><strong>属性</strong></h6><table>
<thead>
<tr>
<th align="left"><strong>属性：</strong></th>
<th align="center"><strong>功能：</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>Light Probes</strong></td>
<td align="center">基于探针的光照插值模式。</td>
</tr>
<tr>
<td align="left">Off</td>
<td align="center">渲染器不使用任何插值光照探针。</td>
</tr>
<tr>
<td align="left">Blend Probes</td>
<td align="center">渲染器使用一个插值光照探针。这是默认选项。</td>
</tr>
<tr>
<td align="left">Use Proxy Volume</td>
<td align="center">渲染器使用插值光照探针的 3D 网格。</td>
</tr>
<tr>
<td align="left"><strong>Reflection Probes</strong></td>
<td align="center">指定游戏对象如何受场景中的反射影响。不能在延迟渲染模式下禁用此属性。</td>
</tr>
<tr>
<td align="left">Off</td>
<td align="center">禁用反射探针，将天空盒用于反射。</td>
</tr>
<tr>
<td align="left">Blend Probes</td>
<td align="center">启用反射探针。混合仅发生在探针之间，在室内环境中非常有用。如果附近没有反射探针，则渲染器将使用默认反射，但默认反射和探针之间不会发生混合。</td>
</tr>
<tr>
<td align="left">Blend Probes and Skybox</td>
<td align="center">启用反射探针。混合发生在探针之间或探针与默认反射之间，对于室外环境非常有用。</td>
</tr>
<tr>
<td align="left">Simple</td>
<td align="center">启用反射探针，但当存在两个重叠的探针体积时，探针之间不会发生混合。</td>
</tr>
<tr>
<td align="left"><strong>Anchor Override</strong></td>
<td align="center">使用<strong>光照探针</strong>或反射探针系统时用变换来确定插值位置。</td>
</tr>
<tr>
<td align="left"><strong>Cast Shadows</strong></td>
<td align="center"></td>
</tr>
<tr>
<td align="left">On</td>
<td align="center">阴影投射光源照在网格上时将投射阴影</td>
</tr>
<tr>
<td align="left">Off</td>
<td align="center">网格不会投射阴影</td>
</tr>
<tr>
<td align="left">Two Sided</td>
<td align="center">从网格的任一侧投射双面阴影。Enlighten 和渐进光照贴图 (Progressive Lightmapper) 不支持双面阴影。</td>
</tr>
<tr>
<td align="left">Shadows Only</td>
<td align="center">网格的阴影将可见，但网格本身不可见</td>
</tr>
<tr>
<td align="left"><strong>Receive Shadows</strong></td>
<td align="center">启用此复选框可使网格显示任何投射在网格上的阴影。仅当使用渐进光照贴图时才支持 Review Shadows 选项</td>
</tr>
<tr>
<td align="left"><strong>Motion Vectors</strong></td>
<td align="center">如果启用此属性，则线会将运动矢量渲染到摄像机运动矢量纹理中。</td>
</tr>
<tr>
<td align="left"><strong>Lightmap Static</strong></td>
<td align="center">启用此复选框可向 Unity 指示该游戏对象的位置是固定的并将参与全局光照计算。如果某个游戏对象未标记为 Lightmap Static，则仍可使用<strong>光照探针</strong>为该对象提供光照。</td>
</tr>
<tr>
<td align="left"><strong>Materials</strong></td>
<td align="center">用于渲染模型的材质列表。</td>
</tr>
<tr>
<td align="left"><strong>Dynamic Occluded</strong></td>
<td align="center">启用此复选框可向 Unity 指示即使该对象未标记为静态，仍应该对该游戏对象执行遮挡剔除。</td>
</tr>
</tbody></table>
<p><em>小物品可以关闭阴影，减少计算量</em></p>
<h4 id="伪造阴影（绘制"><a href="#伪造阴影（绘制" class="headerlink" title="伪造阴影（绘制"></a>伪造阴影（绘制</h4><p>贴图（ps绘制阴影）</p>
<p>选择目标位置 羽化 填充 正片叠底不透明度</p>
<h4 id="投影器"><a href="#投影器" class="headerlink" title="投影器"></a>投影器</h4><p><em>effect</em>  <em>projector</em></p>
<p>绘制阴影 </p>
<p>ps  </p>
<p>不均匀的阴影</p>
<ul>
<li>Color Dynamics（动态颜色）</li>
<li>Scattering（散布）</li>
</ul>
<p>导出png后</p>
<p>1.导入unity 将Texture Type 改为Advanced（高级）</p>
<p>2.Wrap Mode（循环模式）改为Clamp（强制拉伸）</p>
<p>3.勾选Border Mip Maps（边界多级渐进纹理）<em>消除奇怪的边界线</em></p>
<p>4.在光照纹理中 点击select 找到对应的伪阴影。</p>
<p>5.应用，将点<strong>投影器</strong>移动到目标的位置 </p>
<p>6.将物体和<strong>投影器</strong>绑定</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/01/17/Unity3D%20%E5%85%89%E7%85%A7/" data-id="ckk7nbzoo0001xww5b2oa5brl" data-title="Unity3D光照" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-untiy 3D 光照渲染" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/17/untiy%203D%20%E5%85%89%E7%85%A7%E6%B8%B2%E6%9F%93/" class="article-date">
  <time class="dt-published" datetime="2021-01-17T08:11:20.000Z" itemprop="datePublished">2021-01-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/17/untiy%203D%20%E5%85%89%E7%85%A7%E6%B8%B2%E6%9F%93/">Unity3d光照渲染</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="untiy-3D-光照渲染"><a href="#untiy-3D-光照渲染" class="headerlink" title="untiy 3D 光照渲染"></a>untiy 3D 光照渲染</h1><p>1.HDR文件给skybox替换天空</p>
<ul>
<li>Textture Type：cubemap</li>
</ul>
<p>2.Lighting 界面</p>
<ul>
<li>Scene 属性skybox 进行修改</li>
</ul>
<p>3D 产品展示</p>
<p>3D environment插件（做一些简单</p>
<h2 id="静态光照"><a href="#静态光照" class="headerlink" title="静态光照"></a>静态光照</h2><p>执行照明计算非常昂贵。延迟渲染使我们可以使用很多灯光，但是阴影仍然是一个限制因素。如果场景是动态的，那么我们将不可避免地执行这些计算。但是，如果光源和几何物体都不变，那么我们可以只计算一次光源并重复使用它。这样的话就可以在我们的场景中放置许多灯光，而又不必在运行时渲染它们。也可以使用区域光，但这些区域光同样不能用作实时照明。</p>
<h3 id="1-1烘培光"><a href="#1-1烘培光" class="headerlink" title="1.1烘培光"></a>1.1烘培光</h3><p><img src="C:\Users\MECHREVO\AppData\Roaming\Typora\typora-user-images\1607673822573.png" alt="1607673822573"></p>
<p>主定向光转换为烘培光之后，它不再包含在动态光照中。 对于动态对象，就不存在光，只剩下环境照明。</p>
<p>Lighting窗口中（window-rendering-lighting settig)</p>
<p>实际启用灯光映射，在<strong>Mixed LIghting</strong> 中</p>
<ul>
<li>Lighting Mode设置为 Baked Indirect   ——向场景添加间接光</li>
<li>启用 Baked Global Illumination</li>
</ul>
<h4 id="Ambient-Occlusion"><a href="#Ambient-Occlusion" class="headerlink" title="Ambient Occlusion"></a><em>Ambient Occlusion</em></h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/01/17/untiy%203D%20%E5%85%89%E7%85%A7%E6%B8%B2%E6%9F%93/" data-id="ckk7nbzoq0002xww558ujcifn" data-title="Unity3d光照渲染" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Naninovel开坑笔记" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/17/Naninovel%E5%BC%80%E5%9D%91%E7%AC%94%E8%AE%B0/" class="article-date">
  <time class="dt-published" datetime="2021-01-17T08:11:20.000Z" itemprop="datePublished">2021-01-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/17/Naninovel%E5%BC%80%E5%9D%91%E7%AC%94%E8%AE%B0/">Naninovel开坑笔记</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>​        近期需要开发一个视觉小说游戏，经过一番了解，最终选择Naninovel这个unity插件进行开发。</p>
<p>目前美术团队的能力可能不够，先列出自己目标的学习路径以加快开发。</p>
<ul>
<li><p>背景图片的使用(大小、比例、切换)</p>
</li>
<li><p>背景音乐的使用(响应的时机、循环、音量）</p>
</li>
<li><p>相机的使用</p>
</li>
<li><p><strong>人物</strong></p>
</li>
<li><p>选择处理器</p>
</li>
<li><p>存档管理</p>
</li>
<li><p>安置其他游戏</p>
</li>
</ul>
<h2 id="一、Naninovel脚本"><a href="#一、Naninovel脚本" class="headerlink" title="一、Naninovel脚本"></a>一、Naninovel脚本</h2><p>Naninovel脚本文件(.nani) 作为视觉小说的</p>
<table>
<thead>
<tr>
<th align="center">前缀符号</th>
<th>表达类型</th>
</tr>
</thead>
<tbody><tr>
<td align="center">@</td>
<td>命名行</td>
</tr>
<tr>
<td align="center">#</td>
<td>标签行</td>
</tr>
<tr>
<td align="center">；</td>
<td>注释行</td>
</tr>
</tbody></table>
<p>无前缀时，就被视为普通内容文本行。</p>
<p> 编写naninovel脚本时，可以使用花括号将表达式构造注入命令参数值和通用文本行{}： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@input color summary:&quot;你最喜欢什么颜色?&quot;</span><br><span class="line">@save</span><br><span class="line">@stop</span><br><span class="line">&#123;color&#125;,嗯，嗯?&#123;color &#x3D;&#x3D;&quot;蓝色&quot;? &quot;我也是!&quot;:&quot;哦。。。&quot;&#125;</span><br></pre></td></tr></table></figure>
<p>在{}中可使用数学运算，自定义变量（<em>如上</em>）</p>
<p>变量：</p>
<ul>
<li><p>一般情况作用于局部范围，这样的化玩家重新开始新游戏或加载了其他烂尾的游戏后，该值会丢失。大部分变量适用于这种情况。</p>
</li>
<li><p>如果想要将变量存储于全局范围，在其变量名前加上<strong>G_</strong>或<strong>g_</strong></p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/01/17/Naninovel%E5%BC%80%E5%9D%91%E7%AC%94%E8%AE%B0/" data-id="ckk7nbzoq0003xww51hev6vw7" data-title="Naninovel开坑笔记" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-脚本调试优化&amp;内存管理" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/17/%E8%84%9A%E6%9C%AC%E8%B0%83%E8%AF%95%E4%BC%98%E5%8C%96&%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" class="article-date">
  <time class="dt-published" datetime="2021-01-17T08:11:20.000Z" itemprop="datePublished">2021-01-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/17/%E8%84%9A%E6%9C%AC%E8%B0%83%E8%AF%95%E4%BC%98%E5%8C%96&%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/">脚本调试优化&amp;内存管理</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="脚本调试优化-amp-内存管理"><a href="#脚本调试优化-amp-内存管理" class="headerlink" title="脚本调试优化&amp;内存管理"></a>脚本调试优化&amp;内存管理</h1><h3 id="Fixedupdate-amp-Update"><a href="#Fixedupdate-amp-Update" class="headerlink" title="Fixedupdate()&amp;Update()"></a>Fixedupdate()&amp;Update()</h3><h6 id="主要区别"><a href="#主要区别" class="headerlink" title="主要区别"></a>主要区别</h6><ul>
<li><p>Update()在每次渲染新的一帧时执行，受到当前渲染物体的影响。渲染的帧率会变化，渲染的时间间隔也会变化，也就是说Update()更新频率和设备的性能有关。</p>
</li>
<li><p>Fixedupdate()不受帧率的影响，以固定的时间间隔被调用</p>
<p><u>Fixedupdate()运用于物理引擎；Update因为受渲染物体的影响，所以更多的把Update运用于脚本的逻辑控制。</u></p>
<h6 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h6><ul>
<li>尽量不要在Update()中执行Find、FindObjectOfType、FindGameobjectswithtag这些寻找物体的函数；尽量在awake start中调用</li>
<li>引用一个游戏对象的逻辑可以在最开始的时候定义它</li>
<li>当程序不必每帧都执行的时候，可以使用Coroutines函数，定时重复调用可以使用Invokerepeating函数实现。</li>
<li>尽量减少使用临时变量，（尤其在Update实时调用的函数中）</li>
<li>在游戏暂停、场景切换时，可以主动进行垃圾回收。</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/01/17/%E8%84%9A%E6%9C%AC%E8%B0%83%E8%AF%95%E4%BC%98%E5%8C%96&%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" data-id="ckk7nbzos0005xww5exg0erzu" data-title="脚本调试优化&amp;内存管理" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/01/19/Unity%E6%95%99%E7%A8%8B%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Ruby%E2%80%98s%20Adventure/">Unity教程笔记——Ruby‘s Adventure</a>
          </li>
        
          <li>
            <a href="/2021/01/17/Coroutine%E5%8D%8F%E5%90%8C%E7%A8%8B%E5%BA%8F/">Coroutine</a>
          </li>
        
          <li>
            <a href="/2021/01/17/Unity3D%20%E5%85%89%E7%85%A7/">Unity3D光照</a>
          </li>
        
          <li>
            <a href="/2021/01/17/untiy%203D%20%E5%85%89%E7%85%A7%E6%B8%B2%E6%9F%93/">Unity3d光照渲染</a>
          </li>
        
          <li>
            <a href="/2021/01/17/Naninovel%E5%BC%80%E5%9D%91%E7%AC%94%E8%AE%B0/">Naninovel开坑笔记</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>